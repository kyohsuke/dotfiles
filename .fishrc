# vim: filetype=fish
set -gx fish_function_path $fish_function_path "$HOME/.fish-functions"

source "$HOME/.anyenv.fish"
source "$HOME/.environments"
source "$HOME/.aliases"

if test -f /usr/local/bin/brew
  _evalcache /usr/local/bin/brew shellenv
end

if command -v direnv > /dev/null
  _evalcache direnv hook fish
end

if command -v docker-machine > /dev/null
  _evalcache docker-machine env default
end

fish_add_path -m "$HOME/sbin"
fish_add_path -m "$HOME/bin"

if status is-interactive
  function fish_user_key_bindings
    bind -M insert \co __ghq_cd
    bind -M insert \ch __peco_history
    bind -M insert \ck __peco_branch
  end

  # Commands to run in interactive sessions can go here
  set -f vim_version (vim --version | head -1 | sed 's/^.*\ \([0-9]\)\.\([0-9]\)\ .*$/\1\2/')
  alias less="/usr/share/vim/vim$vim_version/macros/less.sh"
end
