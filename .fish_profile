# vim: expandtab softtabstop=2 shiftwidth=2
# vim: foldmethod=marker
# vim: filetype=fish

# {{{ Add PATH
  # {{{ rustup
  test -d "$HOME/.cargo/bin"
  and fish_add_path -m "$HOME/.cargo/bin"
  # }}}
  # {{{ anyenv
  if test -x "$HOME/.anyenv/bin/anyenv"
    fish_add_path -m "$HOME/.anyenv/bin"
    _evalcache anyenv init --no-rehash - fish

    set -f envPath "$HOME/.anyenv/envs"

    # goenv
    if test -x "$envPath/goenv/bin/goenv"
      set -gx GOENV_DISABLE_GOPATH 1
      set -gx GOPATH "$HOME"
      set -gx GOBIN "$GOROOT/bin"
      set -gx GOCACHE "$HOME/.cache/go-build"
      set -gx GOMODCACHE "$HOME/.cache/pkg/mod"
    end

    # pyenv
    if test -x "$envPath/pyenv/bin/pyenv"
      fish_add_path -m "$envPath/pyenv/shims"

      set -gx PYTHONDONTWRITEBYTECODE 1
      set -gx PYENV_VIRTUALENV_DISABLE_PROMPT 1
      set -gx PYTHON_CONFIGURE_OPTS "--enable-framework --enable-optimizations --with-lto"
    end

    # rbenv
    if test -x "$envPath/rbenv/bin/rbenv"
      set -gx GEM_EDITOR "mvim"
      set -gx RUBY_YJIT_ENABLE 1
      set -gx UNBUNDLED_COMMANDS rake cap irb
    end
  end
  # }}}

  test -r "/usr/local/bin/brew"
  and _evalcache /usr/local/bin/brew shellenv

  command -v direnv > /dev/null
  and _evalcache direnv hook fish

  command -v docker-machine > /dev/null
  and _evalcache docker-machine env default

  test -s "$HOME/.rd/bin"
  and fish_add_path -m "$HOME/.rd/bin"
# }}}
